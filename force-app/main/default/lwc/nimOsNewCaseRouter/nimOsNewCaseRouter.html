<!--
  @description: Case New override router
  @author: ChangeMeIn@UserSettingsUnder.SFDoc
  @last modified on: 11-15-2025
  @last modified by: ChangeMeIn@UserSettingsUnder.SFDoc

  This template does NOT show record type selection (that's handled by standard Salesforce modal).
  It only shows:
  1. Loading spinner while determining route
  2. Error message if something goes wrong
  3. ITSM flow for NIM-OS Support record type
  4. Nothing for other RTs (redirects immediately to standard Case form)
-->
<template>
    <!-- Loading Spinner (while resolving RT and routing) -->
    <template if:true={showSpinner}>
        <div class="spinner-container">
            <lightning-spinner alternative-text="Initializing..." size="medium"></lightning-spinner>
            <p class="slds-text-align_center slds-m-top_small slds-text-color_weak">
                Processing your selection...
            </p>
        </div>
    </template>

    <!-- Error Message -->
    <template if:true={showError}>
        <div class="error-container">
            <lightning-icon
                icon-name="utility:error"
                size="small"
                variant="error"
                class="slds-m-right_small"
            ></lightning-icon>
            <p class="error-message">{error}</p>
            <lightning-button
                label="Back to Cases"
                onclick={handleCancel}
                class="slds-m-top_medium"
            ></lightning-button>
        </div>
    </template>

    <!-- ITSM Flow Container (for NIM-OS Support RT only) -->
    <template if:true={showItsmFlow}>
        <c-itsm-flow-container
            record-type-id={selectedRecordTypeId}
            oncasecreated={handleCaseCreated}
            oncancel={handleCancel}
        ></c-itsm-flow-container>
    </template>
</template>
