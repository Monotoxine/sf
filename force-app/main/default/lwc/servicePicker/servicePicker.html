<template>
    <div class="picker-container">

        <!-- Loading Spinner -->
        <template if:true={showSpinner}>
            <div class="slds-align_absolute-center" style="height: 200px;">
                <lightning-spinner alternative-text="Loading services..." size="medium"></lightning-spinner>
            </div>
        </template>

        <!-- Error Message -->
        <template if:true={error}>
            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" role="alert">
                <span class="slds-assistive-text">error</span>
                <lightning-icon icon-name="utility:error" size="small" variant="inverse"></lightning-icon>
                <h2>{error}</h2>
            </div>
        </template>

        <!-- Picker Form -->
        <template if:false={showSpinner}>
            <template if:false={error}>
                <lightning-card title="Select Service" icon-name="custom:custom78">
                    <div class="slds-p-around_medium">

                        <!-- Category Picklist -->
                        <div class="picklist-section">
                            <lightning-combobox
                                name="category"
                                label="1. Select Category *"
                                placeholder="Choose a category"
                                options={categories}
                                value={selectedCategory}
                                onchange={handleCategoryChange}
                                required
                            ></lightning-combobox>
                            <p class="help-text">Select the business category for your request</p>
                        </div>

                        <!-- Subcategory Picklist -->
                        <div class="picklist-section">
                            <lightning-combobox
                                name="subcategory"
                                label="2. Select Subcategory *"
                                placeholder="Choose a subcategory"
                                options={subcategories}
                                value={selectedSubcategory}
                                onchange={handleSubcategoryChange}
                                disabled={isSubcategoryDisabled}
                                required
                            ></lightning-combobox>
                            <p class="help-text">Narrow down your request type</p>
                        </div>

                        <!-- Service Picklist -->
                        <div class="picklist-section">
                            <lightning-combobox
                                name="service"
                                label="3. Select Service *"
                                placeholder="Choose a service"
                                options={services}
                                value={selectedServiceId}
                                onchange={handleServiceChange}
                                disabled={isServiceDisabled}
                                required
                            ></lightning-combobox>
                            <p class="help-text">Select the specific service you need</p>
                        </div>

                    </div>
                </lightning-card>
            </template>
        </template>

    </div>
</template>
